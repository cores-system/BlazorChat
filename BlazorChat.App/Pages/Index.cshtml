@page "/"
@inherits IndexComponent

@if (chatting) {
    <div class="top-row px-4">
        <p>You are connected as <b>@myName</b></p>
        <button class="btn btn-sm btn-warning ml-md-auto" onclick="@Disconnect">Disconnect</button>
    </div>
}

<div class="content px-4">

    @if (!chatting)
    {
        <p>
            This application demonstrates to create a <a href="https://blazor.net/">Blazor Server Side</a> chat application.
        </p>
        <p>
            Source code at <a href="https://github.com/cores-system/BlazorChat">Github</a>.
        </p>

        <hr />
        <h2>Chat Sample</h2>

        <p>
            Enter your name to start chatting:
        </p>

        <input type="text" maxlength="32" bind="@myName" />
        <button type="button" onclick="@Chat"><span class="oi oi-chat" aria-hidden="true"></span> Chat!</button>

        @if (message != null) {
            <div class="invalid-feedback">@message</div>
            <small class="form-text text-muted">@message</small>
        }
    }

    @if (chatting)
    {
        <h1>Chat</h1>
        <div id="scrollbox">

            @foreach (var item in messages)
            {
                <div class="@item.CSS">
                    <div class="user">@item.Username</div>
                    <div class="msg">@item.Msg</div>
                </div>
            }
            <hr />
            <textarea class="input-lg" placeholder="enter your comment" bind="@newMessage"></textarea>
            <div><button class="btn btn-default" onclick="@SendMsg">Send</button></div>
        </div>
    }

</div>